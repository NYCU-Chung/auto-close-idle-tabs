# AutoClose Idle Tabs

一款自動關閉長時間閒置分頁的 Chrome 擴充功能，支援提前通知、白名單／黑名單、右鍵加入白/黑名單，以及「跳過特定分頁」功能。

## 功能特色

- **閒置閾值設定**：使用者可設定「天／時／分／秒」，超過此閾值自動關閉分頁（預設 30 分鐘 0 秒）。  
- **提前通知提醒**：在閒置到達臨界值前「天／時／分／秒」跳出桌面通知（預設 10 分鐘 0 秒前）。  
- **通知開關**：可透過勾選「啟用通知」開／關所有提醒。  
- **白名單保護**：凡 URL 含有白名單關鍵字的分頁，永不關閉，且不顯示於閒置清單。  
- **黑名單立即關閉**：凡 URL 含有黑名單關鍵字的分頁，無論活躍狀態，立即關閉。  
- **閒置分頁清單**：Popup 介面顯示所有背景分頁的閒置時間與剩餘倒數。  
- **右鍵加入白/黑名單**：在網頁空白處右鍵，可快速將該網頁域名加入白名單或黑名單。  
- **跳過特定分頁**：可選擇「跳過已釘選」、「跳過播放中」、「跳過含未提交表單」的分頁，自動將它們加到白名單。

## 安裝

1. 下載或複製專案到本機資料夾。  
2. 解壓縮。  
3. 開啟 Chrome，進入 `chrome://extensions`。  
4. 開啟右上角「開發人員模式」。  
5. 點擊「載入未封裝擴充功能」，選擇剛剛解壓後的資料夾。  
6. 工具列就會出現本擴充圖示，點擊即可開啟設定 Popup。

## 使用說明

1. **閒置閾值**：輸入「天／時／分／秒」，按「儲存設定」。  
2. **提前通知**：輸入提醒偏移「天／時／分／秒」，按「儲存設定」。  
3. **啟用通知**：勾選後才會跳通知；取消勾選則只自動關閉不通知，按「儲存設定」。  
4. **跳過特定分頁**：勾選「跳過已釘選」、「跳過播放中」、「跳過含未提交表單」即可自動將符合條件的分頁加入白名單，按「儲存設定」。  
5. **白名單/黑名單**：在對應 textarea 每行輸入一個關鍵字（不含協定或路徑），按「儲存設定」即可生效。  
   - 白名單：不顯示於閒置清單，永不自動關閉。  
   - 黑名單：立即關閉所有符合條件的分頁。  
6. **右鍵加入白/黑名單**：在網頁任意位置右鍵，可快速把當前網域加入白名單或黑名單，並立即生效。  
7. **閒置分頁清單**：Popup 下方列出所有背景分頁的「已閒置時間」與「剩餘倒數」。

## 範例

- 設定閒置閾值：1 小時 0 秒；提前通知：5 分鐘 0 秒。  
- 勾選「跳過播放中」，正在 YouTube 聆聽音樂時，不會被關閉。  
- 在右鍵選單選「加入黑名單」，立即關閉當前網域所有分頁。

## 原始碼結構

```plaintext
AutoClose-Idle-Tabs/
├── manifest.json   # Chrome 擴充描述檔
├── icon.png        # 擴充圖示
├── background.js   # 背景服務腳本：倒數、通知、關閉機制
├── popup.html      # Popup 介面 HTML
└── popup.js        # Popup 介面邏輯：設定、清單
````

## Version

### v1.1 (2025-08-07)
* 新增「跳過已釘選」、「跳過播放中」、「跳過含未提交表單」自動加入白名單功能
* 新增右鍵選單「加入白名單」「加入黑名單」
* 修正白/黑名單同步及移除邏輯
* 其他細節優化與錯誤修正

### v1.0 (2025-08-06)
* 閒置閾值設定  
* 提前通知提醒  
* 通知開關（啟用／停用）  
* 白名單保護  
* 黑名單立即關閉  
* 閒置分頁清單

## TODO

* 分域別閒置閾值：針對不同網域設定不同閾值
* 快捷鍵操作：一鍵暫停／重置倒數
* 匯出／匯入設定：備份與跨裝置同步
* 關閉歷史與還原：上次關閉分頁還原功能
* 使用統計報表：被關閉分頁數量與常見網域
* 深色／淺色模式：支援系統主題自動切換
* 自訂排程：設定工作日時間區間生效

## 授權

MIT License

---
