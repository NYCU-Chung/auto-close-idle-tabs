# AutoClose Idle Tabs

一款自動關閉長時間閒置分頁的 Chrome 擴充功能，支援提前通知、白名單／黑名單、右鍵加入白/黑名單，以及「跳過特定分頁」功能。

## 功能特色

- **閒置閾值設定**：可設定「天／時／分／秒」，超過此閾值自動關閉分頁（預設 30 分鐘 0 秒）。  
- **提前通知提醒**：在分頁達到閾值前以「天／時／分／秒」提醒（預設 10 分鐘 0 秒）。  
- **通知開關**：勾選「啟用通知」即可開／關所有提醒。  
- **白名單保護**：URL 含白名單關鍵字的分頁，永不關閉，且不顯示於閒置清單。  
- **黑名單立即關閉**：URL 含黑名單關鍵字的分頁，無論活躍狀態，立即關閉。  
- **閒置分頁清單**：Popup 顯示所有背景分頁的「已閒置時間」與「剩餘倒數」。  
- **右鍵加入白/黑名單**：在網頁頁面（右鍵）可快速將當前網域加入白名單或黑名單。  
- **跳過特定分頁**：可選擇「跳過已釘選」、「跳過播放中」、「跳過含未提交表單」— 這些分頁會**在執行期被跳過計時**。

## 安裝

1. 下載或複製專案到本機資料夾並解壓縮。  
2. 開啟 Chrome，進入 `chrome://extensions`。  
3. 開啟右上角「開發人員模式」。  
4. 點擊「載入未封裝擴充功能」，選擇解壓後的資料夾。  
5. 工具列會出現擴充圖示，點擊即可開啟設定 Popup。

## 使用說明

1. **閒置閾值**：輸入「天／時／分／秒」，按「儲存設定」。  
2. **提前通知**：輸入提醒偏移「天／時／分／秒」，按「儲存設定」。  
3. **啟用通知**：勾選後才會跳通知；取消勾選則只自動關閉不通知。  
4. **跳過特定分頁**：勾選「跳過已釘選」、「跳過播放中」、「跳過含未提交表單」即可在計時時跳過這些分頁（**不會自動加入白名單**）。  
5. **白名單/黑名單**：在對應欄位每行輸入一個關鍵字（建議使用網域，例如 `example.com`），按「儲存設定」即生效。  
   - 白名單：不顯示於閒置清單，且永不自動關閉。  
   - 黑名單：立即關閉所有符合條件的分頁。  
6. **右鍵加入白/黑名單**：在網頁任意處右鍵，可快速把當前**網域**加入白名單或黑名單。

## 範例

- 閒置閾值設為 **1 小時 0 秒**；提前通知設為 **5 分鐘 0 秒**。  
- 勾選「跳過播放中」後，正在 YouTube 播放的分頁不會被關閉；停止播放後會恢復計時。  
- 右鍵選單點「加入黑名單」，會立即關閉當前網域所有分頁。

## 原始碼結構

```plaintext
AutoClose-Idle-Tabs/
├── manifest.json   # Chrome 擴充描述檔（MV3）
├── icon.png        # 擴充圖示
├── background.js   # 背景服務：倒數、通知、關閉、黑白名單、右鍵選單
├── popup.html      # Popup 介面
└── popup.js        # Popup 邏輯：設定、閒置清單
````

## Version

### v1.1 (2025-08-07)

* 新增「跳過已釘選 / 播放中 / 含未提交表單」功能。
* 新增右鍵選單「加入白名單」「加入黑名單」。
* 改善白/黑名單比對（以網域為主，避免誤判），並調整計時同步。
* 其他錯誤修正與穩定度提升。

### v1.0 (2025-08-06)

* 初版：閒置閾值、提前通知、通知開關、白名單、黑名單、閒置分頁清單。

## TODO

* 分域別閒置閾值：針對不同網域設定不同閾值
* 快捷鍵操作：一鍵暫停／重置倒數
* 匯出／匯入設定：備份與跨裝置同步
* 關閉歷史與還原：上次關閉分頁還原
* 使用統計報表：關閉數量與常見網域
* 深色／淺色模式：依系統主題切換
* 自訂排程：例如僅於工作日 09:00–18:00 生效

## 授權

MIT License

---
